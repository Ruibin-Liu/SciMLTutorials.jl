agents:
  queue: "juliaecosystem"
  sandbox.jl: true

# This is a pipeline that weaves a tutorial, then uploads the resultant
# .PDF and other reports as (buildkite, not Julia) artifacts.  The `coppermind`
# configuration memoizes the result, so that identical inputs don't get
# weaved multiple times.
steps:
  - label: ":hammer: {PATH}"
    key: "tutorial-{SANITIZED_PATH}"
    env:
      BUILDKITE_PLUGIN_CRYPTIC_BASE64_SIGNED_JOB_ID_SECRET: ${BUILDKITE_PLUGIN_CRYPTIC_BASE64_SIGNED_JOB_ID_SECRET?}
    plugins:
      - staticfloat/cryptic#7134d550fb10e1782e77c3d9993443e1a702b0cc:
          variables:
            - BUILDKITE_S3_ACCESS_KEY_ID="U2FsdGVkX1/ckce1vUF8A17rHLxcAlAou4aokaeS8YL6omsA1Vq1IDZko5cL1Z+t"
            - BUILDKITE_S3_SECRET_ACCESS_KEY="U2FsdGVkX1+SPF81nkK7KQ64DsafSl0qq2iG7BsQs1xlTYEtZV3MqQl3l/NWaiocaEywZZFbAB5zpnKPD0xHTQ=="
            - BUILDKITE_S3_DEFAULT_REGION="U2FsdGVkX1/cORlxhXcxhja2JkqC0f8RmaGYxvGBbEg="
            - SSH_DEPLOY_KEY="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"
      - JuliaCI/julia#v1:
          version: 1.6
      - staticfloat/sandbox:
          rootfs_url: "https://github.com/JuliaCI/rootfs-images/releases/download/v4.10/aws_uploader.x86_64.tar.gz"
          rootfs_treehash: "06ab3be520692c75f8749d610527e26d7973d6bf"
          workspaces:
            # Include the julia we just downloaded
            - "/cache/julia-buildkite-plugin:/cache/julia-buildkite-plugin"
      - staticfloat/coppermind:
          inputs:
            # We are sensitive to the actual tutorial changing
            - {PATH}
            # We are sensitive to the source code of this package changing
            - src/**/*.jl
            # We are sensitive to our overall dependencies changing
            - ./*.toml
          outputs:
            - html/**/*.html
            - markdown/**/*.md
            - notebook/**/*.ipynb
            - pdf/**/*.pdf
            - script/**/*.jl
          s3_prefix: s3://julialang-buildkite-artifacts/scimltutorials
    timeout_in_minutes: 360
    commands: |
      # Instantiate, to install the overall project dependencies
      echo "--- Instantiate"
      julia --project=. -e 'using Pkg; Pkg.instantiate(); Pkg.build()'

      # Run tutorial
      echo "+++ Run tutorial for {PATH}"
      julia --project=. weave_tutorials.jl "{PATH}"

  - label: ":rocket: Publish {PATH}"
    env:
      BUILDKITE_PLUGIN_CRYPTIC_BASE64_SIGNED_JOB_ID_SECRET: ${BUILDKITE_PLUGIN_CRYPTIC_BASE64_SIGNED_JOB_ID_SECRET?}
    plugins:
      - staticfloat/cryptic#7134d550fb10e1782e77c3d9993443e1a702b0cc:
          variables:
            - BUILDKITE_S3_ACCESS_KEY_ID="U2FsdGVkX1/ckce1vUF8A17rHLxcAlAou4aokaeS8YL6omsA1Vq1IDZko5cL1Z+t"
            - BUILDKITE_S3_SECRET_ACCESS_KEY="U2FsdGVkX1+SPF81nkK7KQ64DsafSl0qq2iG7BsQs1xlTYEtZV3MqQl3l/NWaiocaEywZZFbAB5zpnKPD0xHTQ=="
            - BUILDKITE_S3_DEFAULT_REGION="U2FsdGVkX1/cORlxhXcxhja2JkqC0f8RmaGYxvGBbEg="
            - SSH_DEPLOY_KEY="U2FsdGVkX18d/SkCcUC54kJXOfvY1XZJxlOmWrCNDslEDmRIuGdEWbWImCzsHUF+JlIXChL8nsGylJ8d3NwFRZBfTdR+IsdeQ1SdTmBCb2Tlz4RKVS6ok7+yKAEp42bBMJo7VqNWUQBN0C9d+qQMx6t1ag3xECgmxeYA1K0RSi2Z3t9XgQOiC5UgyN2XRwFc50xWWllTJbro1+XNzPkqZTPIy/jdCUuLpiRsbPOGzd+hbAajjRvfqT3h4UwT12o16xLGvtFo7+8zEdbuTR3kY2eD00alwc6zxL/QdXe12nvVF5Zjo6dsdollvL+Sa8ohgLSluCqlgcAOqHuxZuLqWz1TZ/RpAmc8dFEgzW9UiGG/qsqC99v45+TAHmBzXR5oKkpMS8u2n45fl40FskHZoir19HbrR7rNiLz2utr6tafXnJFEGLMPH8KUWoeIhk/Pyjnr2uCtSiyWrC/FrH55lN0Bzb+TpnO2A6caM142OlZIaDeDOHPtgkTI7B6c6iRLe6w8/Mko9rgMMNeqIUPDAHs9EPtlwxS8zLtmVSEfMZtFGdrlLo2ObK5QdsNUlEPIFX4Po/DYyyn6PyJu+aT/vaLUuoyzkeNOVGdso6HxHypZQjYXr6CZh1zzNq7IthOB8GgJaxYBEKtmzVyclotBob7AT3he/bZ2+qBm11NSZuk8yFUUVM02I/lyKXE6FJwOeCTdT1sz7+mbjSNDuWEpPo1Ka5bWpnDMUU2gvfH+cP62kKB3WAaQkZaRK5MmDsCptjapjABc4m74+Ih4L5Ty4j1EIvO5R9pj/TVOKuxh/QkaWQQYHZQyq8UG/YMe9/CdYINTgnPcG98yp216cUXvYlAr4EOk4maDHFyjZoQk20RaddQ0HCjw4aVmCrbRt0hBlB73OVY4DulvhKf+aBPhar1qfIId51B4SshzbEt5iHdRYuZywXSRSHbrUUxe0pmkStSb2IYVs6ke1ueavUtW/0PDQCjd5ahGtijNL0p5AU8RKgXo7xznJoo8yGsp0UmivB/wnf5ynXWkMy2n0NXspU1pFDGW/cWXhOYD5+3Sy367ukG2ACB30Ft55NdHQ3HpRyfTr9l327yRVX1o+dnmmF/McYYgZ3yzcIaNtXNtPeblOxd+lbv3b0P45Xj/oC4BVb7E+Da2BJZC2/HPmwkrd2SLwe7LrWplg8KOVStZe96EVYXwlZrL7SSRqaK+8yMP6ZqaD09SxrckZrHfu6lUlqd8sP7GhPDLHq8o4ajMSpfuUYg3A2P3A8JOjCdU7aN03RtN8mI8/hzdHy35JiXvwulrJnYlbcJZGYXmf9VAxBDgH9VQAsm4ASykyMSt+N9lWZobRGOnSjGg+/zC/wo8FKGjNn2tiw+lBqNTNXei4/KQh5n2eWxOr/kItXyaNdh/JRJPePf9s561+gfcB1tnACFzqS3HpGm3iarxh8SpNwzsT/kkGUMGOM+YD+VnFs4REWZXcyohjVhlPrqAS21qZYMb0AXBIRzBYjrfB6PTuezIfIvwn0nFCEAivC2EGFd0DEABMeBEvoUfg7jvy2m6p7G7qKOzJeTI4Nva5ekAdeRCbU7yMo4XWMdkXEi82GK6k3LOv7vMe7oYEfPW3FHmxPHbHaF53AVZYen2InmDeQ+2BN6i3743GgCBlaZcRrwViOyyxLGOuRq32G4domn6uPgALVZa1JaAtWQeo6NcubqW3FUXPbdvso1ljupxHoH4zfTCzMTwpVE0ebWaby3QBSd1mPVSbIjf+fdbeR0lYKkjOBnZRB3Hxu/Ju3imq+dy6d9hiq1ElStyRIWFP9QWuVap2B4p/Y/eKHOXfFD3WgVEujqFEIqLXdkxgyyLvBCfJ8Kvn+5T1stb8NiJBqHTIkHKgxnILkaYisz/CsJFerTwFHqPpCJSkW3CGq20Yx8aYsTIUpJHetHOdPrgwDgaOjSSyQLHbs70T/sUcexfm0uo0MV23UzhvLTjzcLpSeqI2zhnN4DmT+jbb45ipSfh9EHkKVmiAAyEXKrrQMvbBfb+r4ekilO85hyfp879mCZYp+Qda/k4xoLkJEXXUKYZkiQNoB7g4mj9n8HKKyro4m1dMyFYES32qi/JnPuZXp5SDlLdfUv4aZVPG9uL56mWjIxAdCB8vVQeKTjeCnumUjIEs1bVPomvoHHbhd6UTTKaVIPKbmKhYwgpzUdwLLDKhcMvHQv9GptMBBKLGJUik82GjuV19fA5kxagEM2/0AvIxg2jog3Hbh99NVvvQx++/5vbkhutRL/ZAVecWloK2GKyk80R29Q9vd4qLtSdZd3GQLciengLLpSJsviqX6yBDvV03yEqAw3ow+KcbfKC+DX4O/jj0yH4KTyfgerBpMoGTCFS2RVEqbbUdVd1dHsgrBLhpqM0wlLNidlXARrb0LDuBOpc6Fvo/mnbMzCtoHXvVKEc/Ae6Ehc/ldvk14SVnn9L+CC44V445FlzKVOLAFZek/M9d9U8j0S86Xn/fEJmULrIsUfpCL9m1YofwRjuAvXwVKaKmaQCfugT/wiw0DOe4o/W+Z5xUO7xuYBeS3TqnGVrrzVoqZrCXDDGMpq+xXPSJdlXzA+Uw1nr0gtLkZwPWD4Inp8Ir70iHeockXQV3cuZC9+bidA2e7QwaIcOaOmlOwMo4bZhOO3io3SQ1IMD+r1y3fhYL/qNTy92x0jjBI1fpjgEoLMJsDp+wANHXSUAVtUR8XMNJk/qjeo6MO7K8Dy/NMpb5n6ZMFa6re6dRlfqvE+pXbzotBtiJrvWkS3HhvBvNk5kfwFBL0uvq6MC+kEv/gc7XSxdODpBelrF7mJlBzZ259g1NOBatmY3fL9h7TuEWp7L/uABZjgKirnTetWhJv5vzr6YGQ+O6tFyP2UmH0xC0JlJMx+j0zXkD/MO5d+JzwnrcEW7SaYiM98XkzFqCB6lqlYxIMCUsmcxHsrykOR+B4vT511TLSRlrraDB/cSpL/PgMrmy64LYK5l/cyGbRO+URSHrnABVGAexooXVxYz0aspovoPnamwzdOd3KCQKSKKHHFrR8IrTezUFRWFjEA22l3/j2suI0cUmrq565DMskxvjMZ8q//jtvKmJ9/2X6aoOKHZILjts6X2HrUuKB9Kx9D2Jz5jLvAEdQBdL3Hs7Lt8+EKT1iShU5FyHYNWxk0/4UyfW5zI4XCW3H3ey40yk5ee4esE0qlhA9m5RGRrqzHBaD7KNIjPwfbNQFFIKXB8mO/nZ0MScPtZAh1KT9i6CxlBmgOTwinjbDZK6s5PRjXVHsNCuszAhZtbOgajZDkXbB49H6gglGIOXfkIj+NKFz0ohPN/M0BCbLGqWhE/VmmMD0I9bbDXYVLsbI64aFkMmPWhDKDtTU4fjTslOlZ2bujPK8VtiRvrvLR0iHmr6tory3AKqXZ1CvTHWUaiiKDW5JChBt9r2+MzAxwy0Z3cLWOT3nAtUcpkRPaZUFE+e7Pfe0PhqZRy5f4/Hk3Unq3rDrEqLf+trbCSZR97quXyxp0p3RlnJyGSjBuZkCZxmEd9nDLvyN7KaXOsE0iNuUW4R5ngm2v/qucPA4PEjCx3ffNTHtvVozF8Uo0xkMFpbHLm855K1xnBHrROzZ3yBv1RDx2o2BlCKy9BHmywtm8DgBkU5vcDQpzLuLN/Iv1uiXmkeuwHWC4B8jJSKgcakFzTUpu8yPatbwxhVjv/uiDukNO8Ow5Hvtqi3NGB2eMUwgtXxNELy9vJHgWWcETA2iq4Qz5VjBHr7XmQUUl+ALGxX07dI5kg3dD1g+YEsAXFK/nFziDNbQYypbusbRp+t80hjdk01QsuJjzCZcqsMsyMRrIGFL2hmpbDAisz7b1tlGJalxbPXomsIcxBfaPtR8oKcB0jlYw//UNGWFfTjvJypUrrxlCXyFFT+J6BChSoDQKErmu9CVAauRo5c2i5clnlCTQnU+IlRiCUsAs5Tqa2oIOzcKzS+wt2uJ4Oaw/tnf2NJtonkeD2cEn+lZjN/Lgb3Ppwob9F6puT5l2/UV6p4dFds5YuQlgdw9ZdUgKWhGC6wrTfcLpzDBiltdexifo15r1bdXHRhUZrrZ1isFZyuNCc+VRge1gv+8nNs4Z5yorcX6Sqq2IBmvkXFRhy5NlHM6XhOPtVJGpW9L0+nuuviJPuwY/fVdZBhcTpx2y7sAxmVzyjjwnvFb+A0xk2EX/WVO1WbCjnUTnZ5Y8eZqVOUd5raa76cT52oRSSMprimy0nHRReUioqDQkkaEkiu9oz4oSxz477cbOlGquBV9naBri/OvieX8VsVA75X7wmBH/j+9f5odBrAj6ThWaqpMsQU3WPtUDgVM83cKB8D0go8Ml/PixMPsPFmGqfiDceMZZokFjvjzIlLRQWKw7u5EJ76EGT/Oki+fAZh8B4U8F42wXjMry/K1ENc+kpgFtS36OndA18VK/t71EmT88diMAEQPRuSxkSQk3nOkXZbqzjvj1u4MqS3O8keqGK5QU8+A/69aCAHBsLe4mtlcc3z3p+MPX/ieupQ7avQaf5sm8wTEAAtBJ/02GFzzeg+iE0muQb97uFm6yj1BCXq8O4gN7oleP3piA/AlFZnVH+lTeJGvwULcXSA54OFPVDpISyGeh68XNC5VKkUJEIGJLtqN59jguXBMHDpuML2hfHq5j0GvDdwJ9BK14t"
      - JuliaCI/julia#v1:
          version: 1.6
      - staticfloat/sandbox:
          rootfs_url: "https://github.com/JuliaCI/rootfs-images/releases/download/v4.10/aws_uploader.x86_64.tar.gz"
          rootfs_treehash: "06ab3be520692c75f8749d610527e26d7973d6bf"
          workspaces:
            # Include the julia we just downloaded
            - "/cache/julia-buildkite-plugin:/cache/julia-buildkite-plugin"
      # Use coppermind to download the tutorial results that were calculated in the
      # weaving job above.  Note we still list `outputs` here, since we have the
      # option to extract only a subset of them here.
      - staticfloat/coppermind:
          input_from: "tutorial-{SANITIZED_PATH}"
          outputs:
            - html/**/*.html
            - markdown/**/*.md
            - notebook/**/*.ipynb
            - pdf/**/*.pdf
            - script/**/*.jl
          s3_prefix: s3://julialang-buildkite-artifacts/scimltutorials
      - staticfloat/ssh-agent:
          keyvars:
            - "SSH_DEPLOY_KEY"
    commands: .buildkite/publish_tutorials_output.sh
    # Don't run this unless we're on the master branch, and not until the actual weave
    # command has had a chance to run.
    depends_on: "tutorial-{SANITIZED_PATH}"
    branches: "master"
